## Pulse Token Discovery (Axiom Trade Replica)

Pixel-perfect (≤2 px tolerance) replica of Axiom Trade’s Pulse discovery table. Built with Next.js 14 App Router, Tailwind CSS, Redux Toolkit, React Query, Radix UI, shadcn/ui atoms, Framer Motion micro-interactions, react-virtual, automated visual/Lighthouse testing, and a mock WebSocket feed.

- **Production URL (Vercel):** _replace with your deployment once live_
- **Design baselines:** `design/snapshots/baseline/*.png`

---

### Prerequisites

- Node.js 18+
- npm (bundled with Node)
- Playwright browsers (`npx playwright install --with-deps`)

### Installation & Data

```bash
npm install
npm run generate:data   # optional deterministic regeneration of 70+ tokens
```

### Local Development

```bash
npm run dev        # Next.js app
npm run dev:ws     # mock WebSocket broadcaster (ws://localhost:4000)
# or run both at once
npm run dev:all
```

Visit `http://localhost:3000` with both processes running for live price ticks.

### Production Build

```bash
npm run build
npm run start
```

### Quality Gates

| Command                      | What it does                                                     |
| ---------------------------- | ---------------------------------------------------------------- |
| `npm run lint`               | ESLint (Next + TypeScript ESLint + Prettier)                     |
| `npm run typecheck`          | Strict TypeScript                                                |
| `npm run test:unit`          | Jest + React Testing Library                                     |
| `npm run test:e2e`           | Playwright functional suite (sorting, modal, popovers, WS badge) |
| `npm run test:visual`        | Playwright visual regression vs `design/snapshots/baseline`      |
| `npm run snapshots:baseline` | Regenerate baseline screenshots                                  |
| `npm run test:lh`            | Lighthouse CI with ≥0.90 scores across categories                |

Husky git hooks run `lint-staged` (ESLint + Prettier on changed files) plus `npm run typecheck`. Commitlint enforces Conventional Commit messages.

### Architecture Overview

- **Data layer**: `/src/app/api/tokens/route.ts` serves deterministic mock data generated by `scripts/generate-mock-data.ts`. React Query fetches/caches with hydration; Redux Toolkit manages UI state (tabs, sorting, selected token).
- **Live updates**: `scripts/mock-ws-server.js` pushes ticks every 250–2000 ms. `useWebsocketMock` maintains price maps + history with exponential backoff. `usePrices` merges deltas into the query cache with Framer Motion highlights.
- **Atomic design**: atoms (buttons, badges, skeletons), molecules (indicators, action popovers), organisms (virtualized table, modal) under `src/components`.
- **Performance**: `@tanstack/react-virtual`, memoized selectors, progressive row streaming, skeleton + shimmer loaders, Next Image remote patterns, zero CLS layout.
- **Accessibility**: Radix Tabs/Dialog/Popover/Tooltip, keyboard-focusable rows, ARIA labels, focus trap in modal, tooltip descriptions on headers.

See `DEVNOTES.md` for deeper dives into design tokens, virtualization strategy, and perf trade-offs.
